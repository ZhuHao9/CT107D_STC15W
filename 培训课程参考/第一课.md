## 蓝桥杯第一课

### 1.概论

1. 这个比赛的规则是什么，流程是什么样的？

   * 9点到14点，5个小时，无休息。决赛时一般会提供食物，省赛一般不提供
   * 编程题（90分），以及客观题（10分）
   * 编程题——在板子上把题目的功能实现
   * 客观题——8道选择题，5道填空题
   * 省赛上，3小时编程题，半小时的客观题，半小时的检查

2. 比赛会提供哪些东西？（STC51单片机组资料包/CT107D单片机综合训练平台）

   * 开发板，万用表（一个教室3个）。如果赛题测试需要，如测试PWM输出波形，还会提供考点所在学校拥有的示波器
   * 赛前半小时提供的文件：keil5，STC下载软件
   * 比赛提供的文件：
     * 各个芯片的英文文档资料
     * 一些串口软件，PDF阅读软件
     * 总线驱动

3. 比赛的题目是怎么样的？大概分为几个内容？（8051，输入输出，内部内设）

   * 编程题
     * 考试内容为存粹的8051（不保证，可能国赛会涉及STC15，但是省赛一定考8051）。注意，板上的实际硬件通常是STC152K60S2+40针转接板这样的组合。使用了转接板的STC15系列虽然大体上和经典8051类似，但也有很大的不同，需要特别注意的是：
       * 板上对应于8051的P36、P37连接点被连接到STC15的P42、P44（影响矩阵键盘）
       * 时钟速率不同。STC15是1T单片机，而经典8051（如AT89C51、STC89C51）一般是12T。这回直接影响NOP指令执行所需的实际时间，从而影响使用软件延时的代码（如超声波发生）
     * 输入输出：输入一定是键盘（独立键盘，矩阵键盘），输出一定是数码管（输出仅限于省赛，国赛可能会考串口输出）
     * 内设：一定考定时器，一定几率考PWM（2016年省赛），串口

4. 省赛考什么？国赛考什么？（说明书）

   * 编程题

     数码管，键盘（两种键盘），简单的开关（灯，继电器，蜂鸣器），四大总线（串口，IIC，单总线，spi衍生）：EEPROM，ADC，DAC，温度传感器，时钟芯片

5. 有关编程题目有什么建议？

   * 入场有半个小时的时间，15分钟准备好后，另外15分钟，把数码管敲出来。

6. 有关于客观题有什么建议？（模电视频，数电书，微机接口，STC15基础知识）

   * 模电：视频
   * 数电：教科书
   * 微机接口（下学期再讲）
   * STC15的基础知识：STC官网的文档（比赛有提供，所以先看熟，比赛直接可以搜）,（主看）老师的大黄砖头书（项目一，项目三）

7. 具体的学习计划和时间安排是怎么样的？（基本芯片与输出了解，程序框架与输入端学习，内部逻辑实现，四大总线学习，高级外设学习，习题训练）

   * 7个星期时间：
     * 基本芯片，电路，数码管程序的了解，定时器
     * 程序C/H（自己能写），输入端（独立键盘，矩阵键盘）
     * 内部逻辑实现（砖头书——项目十，任务4）←时钟芯片的使用（SPI协议）
     * （▲）三大总线（IIC，串口，单总线：（ADC，DAC），EEPROM，温度传感器）（项目十五）
       * （寒假）（视频，反馈视频以及代码）
     * （寒假）2道以上的省赛题目。（每道都要做两边）
     * （国赛）超声波，红外线（省赛可能考的难题）PWM，频率计
     * 习题训练（2个星期的特训，包括客观题）
   * 8点半，到11点半——讲课
   * 下午1点半到6点半——连续5小时训练（4个小时后，如果做完可以先走），5个小时做不完，那就继续。

### 2.板子使用

1. 如何配置开发环境。
   1. keil5的安装（一般考场，都是盗版，没有破解，2K的代码量）
   2. STC头文件的安装
   3. 创建项目选择（STC15F2K60S2）
2. 板子可能出现什么问题？
   1. 按键失灵
      * 换一个
   2. 数码管无法显示
      * 把芯片插紧
   3. 无法下载
      * 驱动重装
3. 有关例程中的IO/MM编程是怎么回事？

### 3.电路图讲解


##### 	功能芯片
* [DS1302](http://pdf1.alldatasheet.com/datasheet-pdf/view/58478/DALLAS/DS1302.html)

  * 时钟芯片
  * 可以存储年月日时分秒
  * 我们要掌握他的电路图，设置时间，读取时间的方法。

* [AT24C02](http://pdf1.alldatasheet.com/datasheet-pdf/view/56063/ATMEL/AT24C02.html)

  * 可以实现掉电保存内部数据
  * 我们要掌握他的电路图，存数据方法，读数据方法。

* 霍尔传感器

  * 磁力传感器，当遇到磁铁的S级的时候是低电平，N级的时候是高电平
  * 我们要学会对其进行计数

* [DS18B20](http://pdf1.alldatasheet.com/datasheet-pdf/view/230838/DALLAS/DS18B20.html)

  * 温度传感器，单总线协议
  * 我们要学会他的电路图，读取温度的方法。

* [PCF8591](http://pdf1.alldatasheet.com/datasheet-pdf/view/101396/PHILIPS/PCF8591.html)

  * IIC协议的ADC,DAC接口文件
  * 简单来讲，就是读取电压（ADC），以及输出电压（DAC）
  * 4路电压读取，1路的电压输出，我们要掌握他在哪里读取和输出。
  * 我们要学会他的电路图，读取电压，输出电压的方法。

  ##### 逻辑芯片

* [74HC138](http://pdf1.alldatasheet.com/datasheet-pdf/view/15535/PHILIPS/74HC138.html)

  * 38译码器
  * 使用方法，和原理

* [74HC02](http://pdf1.alldatasheet.com/datasheet-pdf/view/15521/PHILIPS/74HC02.html)

  * 4路或非门芯片
  * 在板子里起到一个非门作用

* [CH340A](http://www.wch.cn/product/CH340.html)

  * 下载器。比赛不考察这个芯片的编程，你能下载程序即可

* [74HC573](http://pdf1.alldatasheet.com/datasheet-pdf/view/15640/PHILIPS/74HC573.html)

  * 并行锁存器
  * 同时控制着数码管，LED灯，开关元件（蜂鸣器，继电器，直流电机，步进电机）

* [ULN2003](http://pdf1.alldatasheet.com/datasheet-pdf/view/25575/STMICROELECTRONICS/ULN2003.html)

  * 八路达林顿管，起到一个电流增强的作用
  * 输入1，输出0，有一个非门的作用

* [LM386](http://www.ti.com/product/LM386/datasheet)

  * 运放
  * 作为音频放大电路的放大器，P07作为信号源，经达林顿管加载N_SPK上，由N_SPK送入此放大电路。输出由板上排针SPK送给板外的扬声器
  * 从来没考过 ~~（你知道的太多了）~~

* [NE555](http://pdf1.alldatasheet.com/datasheet-pdf/view/53594/FAIRCHILD/NE555.html)

  * 可产生0-2kHz的频率的矩形波输出，占空比课通过Rb3变阻器调节
  * 可通过跳线帽线将此信号输入P34（参见板边缘的某个20脚排针）
  * 所以我们要学会单片机的频率计功能
  * 注意此信号对矩阵键盘的影响

* [LM324](http://www.ti.com/product/LM324/datasheet)

  - 四路运放
  - 在板上组成仪表放大器，由板外电路产生差分信号送给板上排针IN+和IN-，输出送给PCF8591的AIN2
  - 从来没考过 ~~（你知道的太多了）~~

* [CX20106](板子文档/CX20106a.pdf)
  
  * 红外遥控接收器集成电路。文档特别难找
  * 因为可以解码40kHz的信号，故板上也用它解码超声波回波
  * 通过跳线帽选择到底是用它解码超声波回波，还是解码红外传感器信号


  （参考文档：中文的数据手册（自己百度找，比赛提供英文文档），开发板的电路图以及说明书。）

  ​

### 4.点亮数码管

1. 芯片讲解

   数据端：P0控制

   选择端：由P25,P26,P27，通过一个38译码器选择对应的573选择引脚（在说明书中有介绍）

2. 程序讲解

   1. 头文件，以及类型定义
   2. 定时器
   3. 锁存器的宏定义
   4. 变量定义
   5. display函数编写
   6. 初始化整理

### 5.练习

1. 使用DXP绘制原理图。
2. 网络收集芯片的中文文档，并写出芯片的主要功能以及使用方法。
3. 使用定时器点亮数码管，显示学号后六位。
